<%- include('../partials/header.ejs') %>

<% if (error && error.length > 0) { %>
    <div id="error-message" style="position: fixed; top: 90px; left: 50%; transform: translateX(-50%); background-color: #f8d7da; color: #721c24; padding: 15px 20px; border-radius: 8px; border: 1px solid #f5c6cb; box-shadow: 0 2px 8px rgba(0,0,0,0.15); max-width: 500px; z-index: 1000; display: flex; justify-content: space-between; align-items: center;">
      <span><%= error[0] %></span>
      <button id="close-error" style="background: none; border: none; font-size: 20px; cursor: pointer; color: #721c24; padding-left: 15px;">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <script>
      const closeBtn = document.getElementById('close-error');
      if (closeBtn) {
        closeBtn.addEventListener('click', () => {
          const errorMsg = document.getElementById('error-message');
          errorMsg.style.transition = 'opacity 0.3s ease-out';
          errorMsg.style.opacity = '0';
          setTimeout(() => errorMsg.remove(), 300);
        });
      }
    </script>
  <% } %>

    <section class="create-post">
        <h2 style="margin-bottom: 14px;">Create a New Post</h2>

        <form action="/create" method="POST" class="post-form">
            <input type="text" name="title" placeholder="Title" required>
            <textarea id="content" name="content" placeholder="Write your post..." required></textarea>
            
            <div style="margin-top: 15px; padding: 10px; background-color: #f5f5f5; border-radius: 5px;">
                <p><strong>Autor:</strong> <%= user.name %></p>
                <p><strong>Data:</strong> <%= new Date().toLocaleDateString('pt-BR') %></p>
            </div>
            
            <button type="submit" class="btn">Publish</button>
        </form>
    </section>

    <%- include('../partials/footer.ejs') %>